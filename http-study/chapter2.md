# 2장. 간단한 프로토콜 HTTP

- HTTP 통신에서 서버와 클라이언트는 어떻게 구분하는가?

  - 리소스를 필요하다고 요구하는 쪽이 클라이언트가 되고, 이러한 리소스를 제공하는 쪽이 서버가 된다.
  - HTTP를 사용해 2대의 컴퓨터 간에 통신을 하는 경우, 한 번 통신을 할 때 마다 어느 한 쪽은 클라이언트가 되고 다른 한 쪽은 서버가 된다. 클라이언트와 서버가 바뀌는 경우도 있지만 한 번 통신했을 때만 보면 클라이언트와 서버의 역할은 반드시 정해져 있다.

- HTTP는 stateless 프로토콜이다. stateless의 특징?

  - 이전에 보냈던 리퀘스트나 이미 되돌려준 리스폰스에 대해서 전혀 기억하고 있지 않다.
  - 새로운 리퀘스트가 보내질 때 마다 새로운 리스폰스가 생성된다. 과거의 정보를 전혀 가지고 있지 않기 때문이다. 이는 많은 데이터를 매우 빠르고 확실하게 처리하는 범위성(scalability)를 확보하기 위해서다.
  - 하지만 스테이트리스 특성만으로는 처리하기 어려운 일이 증가했고, 이를 위해 쿠키라는 기술이 도입되었다. 쿠키를 통해 HTTP 통신에서도 상태를 계속 관리할 수 있게 되었다.

- 리퀘스트 URI를 지정하는 방법에 대해 아는대로 말해보시오

  - 모든 URI를 리퀘스트 URI에 포함한다. 예) `GET http://hackr.jp/index.htm HTTP/1.1`
  - Host 헤더 필드에 네트워크 로케이션을 포함한다. 예) `GET /index.htm HTTP/1.1 \ Host: hackr.jp`

- HTTP 지속 연결이란?

  - HTTP 초기 버전에서는 HTTP 통신을 한 번 할 때마다 TCP에 의해 연결과 종료를 할 필요가 있었다.
  - 리퀘스트를 보낼 때마다 매번 TCP 연결과 종료를 하게 되는 쓸모 없는 일이 발생되어 통신량이 늘어나게 된다. 그래서 HTTP/1.1과 일부 HTTP/1.0에서는 이를 해결하기 위해 지속 연결(Persistent Connections)이라는 방법을 고안했다. **지속 연결의 특징은 어느 한 쪽이 명시적으로 연결을 종료하지 않는 이상 TCP 연결을 계속 유지한다.**
  - 지속연결을 통해 TCP 커넥션의 연결과 종료의 반복되는 오버헤드를 줄여주기 때문에 서버 부하가 경감되며, 오버헤드를 줄인 만큼 HTTP 리퀘스트와 리스폰스가 빠르게 완료되기 떄문에 웹 페이지를 빨리 표시할 수 있다.
  - 지속연결은 리스폰스를 기다리지 않고 바로 다음 리퀘스트를 보낼 수 있게 한다. 즉 파이프라인화를 가능하게 한다. 예를 들어 HTML 한 페이지에 10개의 이미지를 포함한 웹 페이지를 리퀘스트 할 때, 개별 연결보다 지속 연결이 빠르고, 지속연결보다 파이프라인화 쪽이 빠르다. 리퀘스트의 수가 많을수록 파이프라인화 쪽이 빠르다.

- 쿠키란?
  - 쿠키는 리퀘스트와 리스폰스에 쿠키 정보를 추가해서 클라이언트의 상태를 파악하기 위한 시스템이다.
  - 쿠키는 서버에서 리스폰스로 보내진 `Set-Cookie`라는 헤더 필드에 의해 쿠키를 클라이언트에 보존하게 된다. 다음 번에 클라이언트가 같은 서버로 리퀘스트를 보낼 때, 자동으로 쿠키 값을 넣어서 송신하게 된다.
