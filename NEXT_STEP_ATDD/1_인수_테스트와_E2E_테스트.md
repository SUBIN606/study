# week1. 인수 테스트와 E2E 테스트

## 미션
- 지하철역 인수테스트 작성
- 지하철 노선 관리
- 지하철 구간 관리

## 알게된 것
- 인수테스트란 무엇인가에 대해 알게되었다
  - 간단하게 '인수 조건을 기반으로 작성한 테스트'
  - 인수 조건을 도출하기 위해서 '사용자 시나리오'를 작성한다
- `RestAssured`
  - https://rest-assured.io/
  - MockMvc대신 사용할 수 있는 테스트 도구인데, 진짜 편리했다
- SpringBootTest의 환경에 따라 `@Transactional` 애너테이션 작동 여부가 결정된다
  - 테스트 격리의 중요성과 테스트 격리를 할 수 있는 여러 방법에 대해도 알게되었다
  - 특히 `@DirtiesContext`는 처음 알게됐는데, 간단한 테스트에는 좋을 것 같다
## 기억하고 싶은 것
- "적절한 근거와 설명할 수 있는지 여부를 고려하라"
  - 2단계 미션은 API 명세를 보고 그대로 기능을 구현하는 것이었는데, PUT 메서드로 수정하고 성공 응답이 `200 OK`면서 응답 객체는 빈 값이었다. 그래서 일단 명세대로 개발한 후 PR 코멘트로 '응답값이 없으면 `204 NO CONTENT`가 더 낫지 않나요?' 라고 질문했다. 이 때 답변이 인상깊었는데 사실 200과 204는 비슷한 역할을 하는 상태코드로 둘 중 어느 것을 사용해도 문제없다. 이럴 때 선택하는 기준은 '팀원들의 공감을 이끌어 낼 수 있는가', '적절한 근거를 가지고 설명하여 설득할 수 있는가'를 고려해야 한다고 하셨다. 이 점을 꼭 기억하고 추후 PR 코멘트에도 적용해보고, 실무에서도 나의 의견을 어필할 때 근거와 설명으로 설득해내고 싶다!
- 테스트코드 리팩터링
  - 보통 테스트코드는 잘 리팩터링 안했는데, 이 과정에서는 오히려 기능구현보다도 테스트 코드에 대한 피드백이 더 많다보니 테스트코드를 더 간결하고 가독성 좋게 작성하기 위해 노력했다. 테스트 코드를 리팩터링하는 재미도 느낄 수 있었다. 다음 미션에서는 픽스쳐를 만들어봐야겠다.
## 회고
매일 1~2시간씩 시간을 내서 과제를 하려고 했는데 그게 잘 안됐다. 2주차 미션에서는 좀 더 성실히 하기 위해 노력해야겠다. 그래도 오랜만에 회사일이 아닌 다른 프로젝트를 개발하니까 재미있었다. OT에서 기능 구현에 너무 공들이지 말라고 했는데 3단계 때는 테이블 구조 짜는데에도 엄청 시간을 쏟고 기능구현에 더 공들인것같다. 그래서 3단계는 좀 느리게 진행됐다. 2주차 때는 좀 더 테스트 코드에 신경쓰기 위해 주의를 기울여야겠다.

ATDD가 대체뭘까로 시작한 코스인데, 생각보다 더 재미있는 것 같고 ATDD는 실제로 실무에 적용해보기 더 수월할 것 같다는 생각이 든다. 근데 또 막상 실무 코드가 너무 심하게 @@#$#%@하다보니까 기운이 빠져서.. 엄두가 안나기는 한다.

아무튼 다음 주차에서의 목표는 1일 1피드백을 받는 것으로.. 퇴근 후 1시간만이라도 책상 앞에 앉는 습관을 기르자..!
