# 3장. HTTP 정보는 HTTP 메시지에 있다

- HTTP 메시지는 무엇이며 어떻게 구성되어 있는가?

  - HTTP에서 교환하는 정보를 HTTP 메시지라 부른다.
  - HTTP 메시지는 복수 행의 데이터로 구성된 텍스트 문자열이다. 메시지 헤더와 메시지 바디로 구분할 수 있는데, 최초에 나타나는 개행문자(CR+LF)로 메시지 헤더와 메시지 바디를 구분한다. 메시지 바디가 항상 존재하는 것은 아니다.

- HTTP 메시지의 구조에 대해 설명해보라

  - 메시지 헤더, 메시지 바디로 구분할 수 있다.
  - 리퀘스트 메시지는 리퀘스트 라인, 리퀘스트 헤더 필드, 일반 헤더 필드, 엔티티 헤더 필드로 구성되어 있다.
  - 리스폰스 메시지는 상태 라인, 리스폰스 헤더 필드, 일반 헤더 필드, 엔티티 헤더 필드로 구성되어 있다.

- 메시지 바디와 엔티티 바디의 차이점?

  - 메시지 바디는 HTTP 통신의 기본 단위로 옥텟 시퀀스(Octet sequence, octet 8bits)로 구성되고, 통신을 통해서 전송된다.
  - 엔티티 바디는 리퀘스트와 리스폰스의 페이로드(payload)로 전송되는 정보로 엔티티 헤더 필드와 엔티티 파디로 구성된다.
  - HTTP 메시지 바디의 역할은 리퀘스트와 리스폰스에 관한 엔티티 바디를 운반하는 역할이다.

- 콘텐츠 코딩이란?

  - 엔티티에 적용하는 인코딩으로 엔티티 정보를 유지한채로 압축한다. 콘텐츠 코딩된 엔티티는 수신한 클라이언트 측에서 디코딩한다.
  - 주요 콘텐츠 압축에는 gzip(GNU zip), compress(UNIX의 표준 압축), deflate(zlib), identity(인코딩 없음)가 있다.

- 청크 전송 코딩이란 무엇이며 왜 사용하는가?

  - 엔티티 바디를 분할하는 기능을 청크 전송 코딩이라 부른다. 사이즈가 큰 데이터를 전송하는 경우 데이터를 분할해서 보내기 위해 사용한다.
  - 청크 전송 코딩은 엔티티 바디를 청크로 분해한 다음 청크 사이즈를 16진수를 사용해 단락을 표시하고 엔티티 바디 끝에는 "0(CR+LF)"를 기록한다. 청크 전송 코딩된 엔티티 바디는 수신한 클라이언트 측에서 원래의 엔티티 바디로 디코딩 한다.

- HTTP에서 멀티파트란?

  - 하나의 메시지 바디 내부에 엔티티를 여러 개 포함시켜 보낼 수 있는 사양이다. 주로 이미지나 텍스트 파일 등을 업로드할 때 사용한다.

- 레인지 리퀘스트란?

  - 엔티티의 범위를 지정해서 리퀘스트하는 것을 레인지 리퀘스트라고 부른다. 레인지 리퀘스트를 할 때는 `Range` 헤더 필드를 사용해서 리소스의 바이트 레인지를 지정해야 한다. 레인지 리퀘스트에 대한 리스폰스는 `206 Partial Content`라는 리스폰스 메지시가 돌아오고, 만약 서버가 레인지 리퀘스트를 지원하지 않는다면 `200 OK`와 함께 완전한 엔티티를 응답한다.

- 콘텐츠 네고시에이션이란?
  - 클라이언트와 서버가 제공하는 리소스의 내용에 대해 교섭하는 것을 말한다. 클라이언트에 더욱 적합한 리소스를 제공하기 위한 방법이다. `Accept`, `Accept-Charset`, `Accept-Encoding`, `Accept-Language`, `Content-Language` 과 같은 리퀘스트 헤더 필드를 통해 리소스를 판단한다.
